<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
        <extension
               point="org.eclipse.ui.startup">
            <startup
                  class="ummisco.gama.ui.Startup">
            </startup>
         </extension>

   <extension
         point="org.eclipse.ui.ide.projectNatureImages">
      <image
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/folder.model3.png"
            id="msi.gama.application.nature.gamaNature.img"
            natureId="msi.gama.application.gamaNature">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.activities">
      <activity
            description="Disable unwanted eclipse UI"
            id="msi.gama.application.activities"
            name="Disable">
      </activity>
      <activityPatternBinding
            activityId="msi.gama.application.activities"
            pattern="MarkOccurrences">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="msi.gama.application.activities"
            isEqualityPattern="true"
            pattern="msi.gama.application/msi.gama.application.perspectives.ModelingPerspective">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="msi.gama.application.activities"
            isEqualityPattern="true"
            pattern="msi.gama.application/msi.gama.application.perspectives.SimulationPerspective">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="msi.gama.application.activities"
            isEqualityPattern="true"
            pattern="org.eclipse.ui.edit.text.openLocalFile">
      </activityPatternBinding>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="msi.gama.gui.category.gama"
            name="Gama">
      </category>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="isInModelingPerspective">
         <with
               variable="activeWorkbenchWindow.activePerspective">
            <equals
                  value="msi.gama.application.perspectives.ModelingPerspective">
            </equals>
         </with>
      </definition>
      <definition
            id="isInSimulationPerspective">
         <with
               variable="activeWorkbenchWindow.activePerspective">
            <test
                  property="msi.gama.containsString"
                  value="Simulation">
            </test>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="ummisco.gama.ui.perspective.PerspectiveNamePropertyTester"
            id="msi.gama.application.PerspectiveNamePropertyTester"
            namespace="msi.gama"
            properties="containsString"
            type="java.lang.Object">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="ummisco.gama.ui.commands.SimulationStateProvider">
         <variable
               name="msi.gama.application.commands.SimulationRunningState"
               priorityLevel="workbench">
         </variable>
         <variable
               name="msi.gama.application.commands.SimulationType"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="msi.gama.category"
            defaultHandler="ummisco.gama.ui.commands.OpenGamaWebsiteHandler"
            id="msi.gama.application.command.web"
            name="Welcome page">
      </command>
      <category
            id="msi.gama.category"
            name="Specific to GAMA">
      </category>
      <commandParameterType
            id="msi.gama.application.String"
            type="java.lang.String">
      </commandParameterType>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="org.eclipse.ui.edit.copy"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.copy2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.cut"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.cut2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.delete"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.delete2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.paste"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.paste2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.print"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.print2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.undo"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.undo2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.redo"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.redo2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.save"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.save2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.saveAll"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.saveall2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.saveAs"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.saveas2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.refresh"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/navigator/navigator.refresh2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.export"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.export2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.import"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.import2.png">
      </image>
      <image
            commandId="org.eclipse.ui.navigate.collapseAll"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/navigator/navigator.collapse2.png">
      </image>
      <image
            commandId="org.eclipse.ui.window.preferences"
            icon="platform:/plugin/ummisco.gama.ui.shared/icons/menu.open.preferences2.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="*">
         <hiddenMenuItem
               id="org.eclipse.ui.project.buildAll">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.pde.ui.junitWorkbenchShortcut.debug">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.pde.ui.junitWorkbenchShortcut.run">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.externaltools.ExternalToolMenuDelegateToolbar">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.externalTools.commands.OpenExternalToolsConfigurations">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.navigate.addToWorkingSet">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.navigate.removeFromWorkingSet">
         </hiddenMenuItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.back">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.forward">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.up">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.next">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.backwardHistory">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.forwardHistory">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.previous">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.edit.text.gotoPreviousAnnotation">
         </hiddenToolBarItem>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="msi.gama.application.common.toolbar"
               label="Common">
            <command
                  commandId="msi.gama.application.goto.modeling"
                  icon="platform:/plugin/ummisco.gama.ui.shared/icons/perspective.modeling2.png"
                  label="Modeling perspective"
                  style="push"
                  tooltip="Open modeling perspective">
               <visibleWhen
                     checkEnabled="false">
                  <not>
                     <reference
                           definitionId="isInModelingPerspective">
                     </reference>
                  </not>
               </visibleWhen>
            </command>
            <command
                  commandId="msi.gama.application.goto.simulation"
                  icon="platform:/plugin/ummisco.gama.ui.shared/icons/perspective.simulation2.png"
                  label="Simulation perspective"
                  style="push"
                  tooltip="Open simulation perspective">
               <visibleWhen
                     checkEnabled="false">
                  <not>
                     <reference
                           definitionId="isInSimulationPerspective">
                     </reference>
                  </not>
               </visibleWhen>
            </command>
            <control
                  class="ummisco.gama.ui.controls.Separator"
                  id="separator2876">
            </control>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:file?after=open.ext">
         <command
               commandId="org.eclipse.ui.file.switchWorkspace"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="msi.gama.category"
            id="msi.gama.application.commands.SwitchPerspective"
            name="Switch Perspective">
      </command>
      <command
            categoryId="msi.gama.category"
            defaultHandler="ummisco.gama.ui.commands.SwitchWorkspaceHandler"
            id="org.eclipse.ui.file.switchWorkspace"
            name="Switch Workspace">
      </command>
      <command
            categoryId="msi.gama.category"
            defaultHandler="ummisco.gama.ui.commands.PreferencesHandler"
            id="msi.gama.application.preferences"
            name="Preferences">
      </command>
      <command
            categoryId="msi.gama.category"
            id="msi.gama.application.goto.simulation"
            name="Switch to simulation perspective">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
               <handler
            class="ummisco.gama.ui.commands.PreferencesHandler"
            commandId="org.eclipse.ui.window.preferences">
         <activeWhen>
            <or>
               <reference
                     definitionId="isInModelingPerspective">
               </reference>
               <reference
                     definitionId="isInSimulationPerspective">
               </reference>
            </or>
         </activeWhen>
      </handler>
               <handler
                     class="ummisco.gama.ui.commands.SwitchToSimulation"
                     commandId="msi.gama.application.goto.simulation">
                  <activeWhen>
                     <and>
                        <reference
                              definitionId="isInModelingPerspective">
                        </reference>
                        <not>
                           <with
                                 variable="msi.gama.application.commands.SimulationRunningState">
                              <equals
                                    value="NONE">
                              </equals>
                           </with>
                        </not>
                     </and>
                  </activeWhen>
               </handler>
   </extension>

</plugin>
